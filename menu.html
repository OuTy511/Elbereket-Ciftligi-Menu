<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <title data-i18n="menu.meta.title">المنيو – مزارع البركات</title>

    <!-- Cairo -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="style/lang.css" />
    <link rel="stylesheet" href="style/menu.css" />
    <script src="js/i18n.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  </head>
  <body class="menu-page">
    <div class="lang-gate" data-lang-gate hidden>
      <div class="lang-gate__panel" role="dialog" aria-modal="true">
        <div class="lang-gate__title" id="langGateTitle">
          <span>اختر لغتك</span>
          <span>Dilinizi seçin</span>
        </div>
        <p class="lang-gate__subtitle">
          <span>من فضلك اختر اللغة التي تفضلها للمتابعة.</span>
          <span>Lütfen devam etmek için dili seçin.</span>
        </p>
        <div
          class="lang-gate__options lang-switch"
          role="group"
          aria-labelledby="langGateTitle"
        >
          <button type="button" class="lang-option" data-lang="ar">
            <span class="lang-option__flag" aria-hidden="true">
              <img src="img/flags/egypt.svg" alt="" />
            </span>
            <span class="lang-option__label">عربي</span>
          </button>
          <button type="button" class="lang-option" data-lang="tr">
            <span class="lang-option__flag" aria-hidden="true">
              <img src="img/flags/turkey.svg" alt="" />
            </span>
            <span class="lang-option__label">Türkçe</span>
          </button>
        </div>
      </div>
    </div>

    <div class="lang-fab" data-lang-fab hidden>
      <button
        type="button"
        class="lang-fab__toggle"
        data-lang-fab-toggle
        aria-haspopup="true"
        aria-expanded="false"
        data-i18n-title="common.langSwitch.label"
      >
        <span class="lang-fab__flag" aria-hidden="true">
          <img data-lang-flag-img src="img/flags/egypt.svg" alt="" />
        </span>
        <span class="sr-only" data-i18n="common.langSwitch.label">تغيير اللغة</span>
      </button>
      <div class="lang-fab__menu" data-lang-fab-menu>
        <div
          class="lang-fab__menu-inner lang-switch"
          role="group"
          data-i18n-attr='{"aria-label":"common.langSwitch.label"}'
        >
          <button type="button" class="lang-option" data-lang="ar">
            <span class="lang-option__flag" aria-hidden="true">
              <img src="img/flags/egypt.svg" alt="" />
            </span>
            <span class="lang-option__label">عربي</span>
          </button>
          <button type="button" class="lang-option" data-lang="tr">
            <span class="lang-option__flag" aria-hidden="true">
              <img src="img/flags/turkey.svg" alt="" />
            </span>
            <span class="lang-option__label">Türkçe</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Header -->
    <header class="header">
      <div class="container header__inner">
        <a class="logo" href="index.html"
          ><img src="img/logos/logo-3.png" alt="مزارع البركات"
        /></a>

        <nav
          class="nav-desktop"
          aria-label="القائمة الرئيسية"
          data-i18n-attr='{"aria-label":"nav.aria.main"}'
        >
          <ul class="nav-list">
            <li><a href="index.html" data-i18n="nav.home">الصفحة الرئيسية</a></li>
            <li>
              <a class="active" href="menu.html" data-i18n="nav.menu">المنيو</a>
            </li>
            <li><a href="index.html#about" data-i18n="nav.about">من نحن</a></li>
            <li><a href="index.html#contact" data-i18n="nav.contact">تواصل معنا</a></li>
          </ul>
        </nav>

        <!-- موبايل -->
        <div class="mobile-actions">
          <a class="nav-home" href="index.html" data-i18n="nav.home"
            >الصفحة الرئيسية</a
          >
          <button
            class="menu-toggle"
            aria-label="فتح القائمة"
            aria-expanded="false"
            data-i18n-attr='{"aria-label":"common.aria.openMenu"}'
          >
            <span class="bar"></span><span class="bar"></span
            ><span class="bar"></span>
          </button>
        </div>

        <nav
          class="nav-mobile"
          aria-label="قائمة الموبايل"
          data-i18n-attr='{"aria-label":"nav.aria.mobile"}'
        >
          <ul class="navm-list">
            <li><a class="active" href="menu.html" data-i18n="nav.menu">المنيو</a></li>
            <li><a href="index.html#about" data-i18n="nav.about">من نحن</a></li>
            <li><a href="index.html#contact" data-i18n="nav.contact">تواصل معنا</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- أدوات المنيو -->
    <section class="menu-tools container">
      <div class="tools-row">
        <div class="filters-wrapper">
          <button
            class="filters-arrow prev"
            type="button"
            data-filter-arrow="prev"
            aria-label="تصنيفات سابقة"
            data-i18n-attr='{"aria-label":"menu.filters.prev"}'
          >
            <i class="fa-solid fa-angle-right"></i>
          </button>
          <div class="filters-scroller" id="filtersScroll">
            <div id="categoryFilters" class="filters"></div>
          </div>
          <button
            class="filters-arrow next"
            type="button"
            data-filter-arrow="next"
            aria-label="تصنيفات إضافية"
            data-i18n-attr='{"aria-label":"menu.filters.next"}'
          >
            <i class="fa-solid fa-angle-left"></i>
          </button>
        </div>
        <label class="search-wrap" for="searchInput">
          <i class="fa-solid fa-magnifying-glass"></i>
          <input
            id="searchInput"
            type="text"
            placeholder="ابحث عن منتج..."
            data-i18n-placeholder="menu.filters.search"
          />
        </label>
      </div>
    </section>

    <!-- العروض -->
    <section id="offers" class="offers-section container" style="display: none">
      <h2>
        <i class="fa-solid fa-tags"></i>
        <span data-i18n="menu.offers.title">عروض اليوم</span>
      </h2>
      <div class="offers-slider" data-offers-slider>
        <button
          class="offers-arrow prev"
          type="button"
          data-offers-prev
          aria-label="العرض السابق"
        >
          <i class="fa-solid fa-angle-right"></i>
        </button>
        <div class="offers-slider__viewport" data-offers-viewport>
          <div id="offersGrid" class="menu-grid offers-grid"></div>
        </div>
        <button
          class="offers-arrow next"
          type="button"
          data-offers-next
          aria-label="العرض التالي"
        >
          <i class="fa-solid fa-angle-left"></i>
        </button>
      </div>
      <div class="offers-dots" id="offersDots" role="tablist"></div>
    </section>

    <!-- شبكة المنتجات -->
    <section class="menu-section container">
      <h2 data-i18n="menu.products.title">قائمة المنتجات</h2>
      <div id="menuGrid" class="menu-grid"></div>
    </section>

    <!-- فاب للسلة -->
    <button
      id="cartFab"
      class="cart-fab"
      aria-label="سلتك"
      data-i18n-attr='{"aria-label":"menu.cart.title"}'
    >
      <i class="fa-solid fa-basket-shopping"></i>
      <span class="count">0</span>
    </button>

    <button
      id="backToTopMenu"
      class="scroll-top-fab"
      type="button"
      aria-label="العودة إلى أعلى الصفحة"
      data-i18n-attr='{"aria-label":"common.aria.backToTop"}'
    >
      <i class="fa-solid fa-arrow-up"></i>
    </button>

    <!-- درج السلة -->
    <aside id="cartDrawer" class="cart-drawer" aria-hidden="true">
      <div class="drawer-head">
        <h3>
          <i class="fa-solid fa-basket-shopping"></i>
          <span data-i18n="menu.cart.title">سلتك</span>
        </h3>
        <button
          class="drawer-close"
          aria-label="إغلاق"
          data-i18n-attr='{"aria-label":"common.actions.close"}'
        >
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
      <div id="cartItems" class="drawer-body">
        <p class="muted" data-i18n="menu.cart.empty">السلة فارغة</p>
      </div>
      <div class="drawer-footer">
        <div class="total">
          <span data-i18n="menu.cart.totalLabel">الإجمالي التقريبي:</span>
          <b class="ltr-text" id="cartTotal">0₺</b>
        </div>
        <p class="muted total-note" data-i18n="menu.cart.totalNote">
          الإجمالي تقريبي وقد تختلف القيمة النهائية بعد الوزن الفعلي.
        </p>
        <p class="muted total-note note-em" data-i18n="menu.cart.totalNoteEm">
          احتمال فروقات بسيطة باختلاف الوزن.
        </p>
        <button id="goConfirm" class="btn-confirm" type="button">
          <span class="ico"><i class="fa-solid fa-list-check"></i></span>
          <span data-i18n="menu.cart.confirm">تأكيد الطلب</span>
        </button>

        <button
          id="cartClear"
          class="btn-secondary"
          style="width: 100%; margin-top: 8px"
          data-i18n="menu.cart.clear"
        >
          تفريغ السلة
        </button>
      </div>
    </aside>
    <div id="drawerBackdrop" class="backdrop"></div>

    <!-- مودال تفاصيل الطلب -->
    <div id="orderModal" class="modal" aria-hidden="true">
      <div class="modal-content">
        <div class="modal-head">
          <h3 id="modalTitle">
            <i class="fa-solid fa-list-check"></i>
            <span data-i18n="menu.modal.title">تفاصيل الطلب</span>
          </h3>
          <button
            class="modal-close"
            aria-label="إغلاق"
            data-i18n-attr='{"aria-label":"common.actions.close"}'
          >
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <div class="modal-body">
          <div class="modal-product">
            <img id="modalImg" src="" alt="" />
            <div>
              <div class="name" id="modalName"></div>
              <div class="cat" id="modalCat"></div>
            </div>
          </div>

          <!-- نُخفيه تلقائيًا لو مفيش تقطيع -->
          <div id="cutRow">
            <label class="lbl" data-i18n="menu.modal.cutLabel"
              >اختر طريقة التقطيع</label
            >
            <select id="cutSelect"></select>
          </div>

          <label class="lbl" data-i18n="menu.modal.quantity">الكمية</label>
          <div class="qty">
            <button id="qtyMinus" type="button">
              <i class="fa-solid fa-minus"></i>
            </button>
            <input
              id="qtyInput"
              class="numeric-input"
              type="text"
              inputmode="decimal"
              pattern="[0-9.,٫٬،]*"
              min="1"
              step="1"
              value="1"
              lang="en"
              dir="ltr"
              autocomplete="off"
              autocorrect="off"
              autocapitalize="off"
              spellcheck="false"
            />
            <button id="qtyPlus" type="button">
              <i class="fa-solid fa-plus"></i>
            </button>
          </div>

          <label class="lbl with-count">
            <span data-i18n="menu.modal.noteLabel">ملاحظة (اختياري)</span>
            <span class="char-count"><b id="noteCount">0</b>/160</span>
          </label>
          <textarea
            id="noteInput"
            maxlength="160"
            placeholder="يمكنك كتابة ملاحظة قصيرة بحد أقصى 160 حرفًا. مثال: قطع صغيرة؛ بدون دهن؛ تعبئة مزدوجة."
            data-i18n-placeholder="menu.modal.notePlaceholder"
          ></textarea>
        </div>

        <div class="modal-footer">
          <button class="btn-secondary" id="modalCancel">
            <span data-i18n="common.actions.cancel">إلغاء</span>
          </button>
          <button class="btn-primary" id="modalAdd">
            <i class="fa-solid fa-cart-plus"></i>
            <span data-i18n="common.actions.addToCart">أضف للسلة</span>
          </button>
        </div>
      </div>
      <div class="backdrop"></div>
    </div>

    <script src="JS/menu.js" defer></script>
  </body>
</html>
